<!DOCTYPE html>
<html lang="th">
<head>
<link rel="icon" href="image/logo.png" type="image/png">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Back to School Voting - Login</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600&display=swap" rel="stylesheet">

<style>
body{
  font-family:'Prompt',sans-serif;
  overflow:hidden;
}

/* Background animation */
@keyframes gradientMove{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}
.animated-bg{
  background-size:300% 300%;
  animation:gradientMove 15s ease infinite;
}

/* Fade */
@keyframes fadeUp{
  from{opacity:0; transform:translateY(20px)}
  to{opacity:1; transform:translateY(0)}
}
.fade-up{ animation:fadeUp 1s ease forwards; }

/* Apple Ultra SweetAlert */
.swal2-popup.apple-ultra {
  border-radius: 24px !important;
  background: rgba(255,255,255,0.75) !important;
  backdrop-filter: blur(30px) saturate(180%);
  -webkit-backdrop-filter: blur(30px) saturate(180%);
  box-shadow: 0 30px 80px rgba(0,0,0,0.25);
  border: 1px solid rgba(255,255,255,0.6);
  padding: 2rem;
  animation: appleShow .25s ease-out;
}

@keyframes appleShow{
  from{opacity:0; transform:scale(0.9);}
  to{opacity:1; transform:scale(1);}
}

.swal2-title{
  font-weight:600 !important;
  font-size:18px !important;
  color:#1d1d1f !important;
}

.swal2-html-container{
  font-size:14px !important;
  color:#6e6e73 !important;
}

.apple-btn{
  background: linear-gradient(to bottom,#0a84ff,#0066cc);
  color:white;
  border:none;
  padding:8px 22px;
  border-radius:12px;
  font-weight:500;
  transition:0.2s;
}

.apple-btn:hover{
  background: linear-gradient(to bottom,#339cff,#007aff);
}

canvas{
  position:absolute;
  top:0;
  left:0;
  z-index:0;
}
</style>
</head>

<body class="min-h-screen flex flex-col animated-bg
             bg-gradient-to-br from-pink-400 via-purple-400 to-blue-400">

<canvas id="particles"></canvas>

<div class="relative z-10 flex-grow flex items-center justify-center px-4">

<form onsubmit="login(event)"
class="fade-up w-full max-w-md
       bg-white/25 backdrop-blur-3xl
       border border-white/40
       shadow-[0_20px_60px_rgba(0,0,0,0.25)]
       rounded-3xl
       p-8">

<div class="text-center mb-8">
  <img src="image/logo.png" 
       alt="Logo" 
       class="mx-auto mb-4 max-w-xs w-full h-auto"
       style="max-height:80px;">

  <h2 class="text-3xl font-semibold text-white drop-shadow-lg">
    Login
  </h2>
  <p class="text-white/80 text-sm mt-2">
    ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£
  </p>
</div>

  <input id="username" type="text" required
    class="w-full mb-5 px-4 py-3 rounded-xl
           bg-white/70 border border-white/60
           focus:outline-none focus:ring-2 focus:ring-blue-400"
    placeholder="Username">

  <input id="password" type="password" required
    class="w-full mb-6 px-4 py-3 rounded-xl
           bg-white/70 border border-white/60
           focus:outline-none focus:ring-2 focus:ring-blue-400"
    placeholder="Password">

  <button id="loginBtn" type="submit"
    class="w-full py-3 rounded-xl text-white font-medium
           bg-gradient-to-r from-blue-500 to-blue-600
           shadow-xl transition duration-300">

    <span id="btnText">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</span>
  </button>

</form>
</div>

<footer class="relative z-10 mt-auto text-center py-5 text-white/80 text-sm">
  ¬© 2026 Back to School Event | Developed by Jakrayut Sangbunrueang
</footer>

<script>
const API="https://script.google.com/macros/s/AKfycbzwSy1VcfUtuWgOtD9pZwpVgYXFvWJ99_ZPw5JLDvmo1uf7vVrCj2hMDnnxLVMwEYGYcg/exec";

const swalApple = Swal.mixin({
  customClass:{
    popup:'apple-ultra',
    confirmButton:'apple-btn'
  },
  buttonsStyling:false,
  backdrop:'rgba(0,0,0,0.35)'
});

function login(e){
  e.preventDefault();

  const usernameInput = document.getElementById("username");
  const passwordInput = document.getElementById("password");
  const loginBtn = document.getElementById("loginBtn");
  const btnText = document.getElementById("btnText");

  const username = usernameInput.value.trim().toLowerCase();
  const password = passwordInput.value.trim();

  if(!username || !password){
    swalApple.fire({
      title:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö",
      confirmButtonText:"‡∏ï‡∏Å‡∏•‡∏á"
    });
    return;
  }

  /* üî• Disable ‡∏õ‡∏∏‡πà‡∏° + Spinner ‡πÉ‡∏ô‡∏õ‡∏∏‡πà‡∏° */
  loginBtn.disabled = true;
  loginBtn.classList.add("opacity-80");

  btnText.innerHTML = `
    <span class="flex items-center justify-center gap-2">
      <span class="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></span>
      ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö...
    </span>
  `;

  /* üî• Apple Loading Popup */
  swalApple.fire({
    title: "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•",
    html: "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà...",
    allowOutsideClick: false,
    showConfirmButton: false,
    didOpen: () => {
      Swal.showLoading();
    }
  });

  fetch(`${API}?action=login&username=${encodeURIComponent(username)}&password=${encodeURIComponent(password)}`)
  .then(res=>res.json())
  .then(data=>{

    Swal.close();

    if(data.status==="success"){
      localStorage.setItem("judge",data.judge);

      swalApple.fire({
        icon: "success",
        title: "‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",
        html: `
          <div class="text-lg mt-2">
            ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö <b>${data.judge}</b>
          </div>
          <div class="text-sm text-gray-500 mt-2">
            ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å‡πÉ‡∏ô <b><span id="countdown">2</span></b> ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
          </div>
        `,
        showConfirmButton: false,
        timer: 2000,
        timerProgressBar: true,
        allowOutsideClick: false
      }).then(() => {
        window.location.href = "home.html";
      });

    }else{
      throw new Error();
    }

  })
  .catch(()=>{

    Swal.close();

    swalApple.fire({
      icon:"error",
      title:"‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",
      html:"Username ‡∏´‡∏£‡∏∑‡∏≠ Password ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á",
      confirmButtonText:"‡∏•‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á"
    });

  })
  .finally(()=>{
    /* üî• ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡∏õ‡∏∏‡πà‡∏° */
    loginBtn.disabled = false;
    loginBtn.classList.remove("opacity-80");
    btnText.innerHTML = "‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö";
  });
}
/* Spinner animation */
const style=document.createElement('style');
style.innerHTML=`@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}`;
document.head.appendChild(style);

/* Particle */
const canvas=document.getElementById("particles");
const ctx=canvas.getContext("2d");
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

let particles=[];
for(let i=0;i<60;i++){
  particles.push({
    x:Math.random()*canvas.width,
    y:Math.random()*canvas.height,
    r:Math.random()*2+1,
    d:Math.random()*1
  });
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle="rgba(255,255,255,0.5)";
  ctx.beginPath();
  particles.forEach(p=>{
    ctx.moveTo(p.x,p.y);
    ctx.arc(p.x,p.y,p.r,0,Math.PI*2,true);
  });
  ctx.fill();
  particles.forEach(p=>{
    p.y+=p.d;
    if(p.y>canvas.height){
      p.y=0;
      p.x=Math.random()*canvas.width;
    }
  });
}
setInterval(draw,33);

window.addEventListener("resize",()=>{
  canvas.width=window.innerWidth;
  canvas.height=window.innerHeight;
});
</script>

</body>
</html>



